<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plate (dometyl.Generator__.Plate)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">dometyl</a> &#x00BB; <a href="../index.html">Generator__</a> &#x00BB; Plate</nav><h1>Module <code>Generator__.Plate</code></h1></header><aside><p>Switch plate generation.</p></aside><dl><dt class="spec module" id="module-Lookups"><a href="#module-Lookups" class="anchor"></a><code><span class="keyword">module</span> <a href="Lookups/index.html">Lookups</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Provides per-column lookup functions to be used by <a href="Lookups/index.html#val-make"><code>make</code></a> for placement of <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>s to form <a href="../Column/index.html#type-t"><code>Column.t</code></a>s, and for arrangment and orientation of the generated columns to form the plate.</p></dd></dl><dl><dt class="spec type" id="type-config"><a href="#type-config" class="anchor"></a><code><span class="keyword">type</span> <span>'k config</span></code><code> = </code><code>{</code><table class="record"><tr id="type-config.n_rows" class="anchored"><td class="def field"><a href="#type-config.n_rows" class="anchor"></a><code>n_rows : Base.int <span>&#45;&gt;</span> Base.int;</code></td></tr><tr id="type-config.row_centres" class="anchored"><td class="def field"><a href="#type-config.row_centres" class="anchor"></a><code>row_centres : Base.int <span>&#45;&gt;</span> Base.float;</code></td></tr><tr id="type-config.n_cols" class="anchored"><td class="def field"><a href="#type-config.n_cols" class="anchor"></a><code>n_cols : Base.int;</code></td></tr><tr id="type-config.centre_col" class="anchored"><td class="def field"><a href="#type-config.centre_col" class="anchor"></a><code>centre_col : Base.int;</code></td></tr><tr id="type-config.spacing" class="anchored"><td class="def field"><a href="#type-config.spacing" class="anchor"></a><code>spacing : Base.float;</code></td></tr><tr id="type-config.tent" class="anchored"><td class="def field"><a href="#type-config.tent" class="anchor"></a><code>tent : Base.float;</code></td></tr><tr id="type-config.thumb_offset" class="anchored"><td class="def field"><a href="#type-config.thumb_offset" class="anchor"></a><code>thumb_offset : Scad_ml.Vec3.t;</code></td></tr><tr id="type-config.thumb_angle" class="anchored"><td class="def field"><a href="#type-config.thumb_angle" class="anchor"></a><code>thumb_angle : Scad_ml.Vec3.t;</code></td></tr></table><code>}</code></dt><dd><p>Non-function parameters used for the construction of the plate.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'k t</span></code><code> = </code><code>{</code><table class="record"><tr id="type-t.config" class="anchored"><td class="def field"><a href="#type-t.config" class="anchor"></a><code>config : <span><span class="type-var">'k</span> <a href="index.html#type-config">config</a></span>;</code></td></tr><tr id="type-t.scad" class="anchored"><td class="def field"><a href="#type-t.scad" class="anchor"></a><code>scad : Scad_ml.Scad.t;</code></td></tr><tr id="type-t.columns" class="anchored"><td class="def field"><a href="#type-t.columns" class="anchor"></a><code>columns : <span><span class="type-var">'k</span> <a href="../../Generator/Columns/index.html#type-t">Generator.Columns.t</a></span>;</code></td></tr><tr id="type-t.thumb" class="anchored"><td class="def field"><a href="#type-t.thumb" class="anchor"></a><code>thumb : <span><span class="type-var">'k</span> <a href="../../Generator/Column/index.html#type-t">Generator.Column.t</a></span>;</code></td></tr></table><code>}</code></dt><dd><p>The plate is constructed from a main body of <a href="../Columns/index.html#type-t"><code>Columns.t</code></a> and a thumb cluster, modelled as a separate <a href="../Column/index.html#type-t"><code>Column.t</code></a>. As with lower types, the config as well as the aggregate <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> are carried around for convenient access.</p></dd></dl><div><div class="spec include"><div class="doc"><dl><dt class="spec value" id="val-translate"><a href="#val-translate" class="anchor"></a><code><span class="keyword">val</span> translate : Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-scale"><a href="#val-scale" class="anchor"></a><code><span class="keyword">val</span> scale : Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-rotate"><a href="#val-rotate" class="anchor"></a><code><span class="keyword">val</span> rotate : Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-rotate_about_pt"><a href="#val-rotate_about_pt" class="anchor"></a><code><span class="keyword">val</span> rotate_about_pt : Scad_ml.Vec3.t <span>&#45;&gt;</span> Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-quaternion"><a href="#val-quaternion" class="anchor"></a><code><span class="keyword">val</span> quaternion : Scad_ml.Quaternion.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-quaternion_about_pt"><a href="#val-quaternion_about_pt" class="anchor"></a><code><span class="keyword">val</span> quaternion_about_pt : Scad_ml.Quaternion.t <span>&#45;&gt;</span> Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-mirror"><a href="#val-mirror" class="anchor"></a><code><span class="keyword">val</span> mirror : Scad_ml.Vec3.t <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt></dl></div></div></div><dl><dt class="spec value" id="val-make_thumb"><a href="#val-make_thumb" class="anchor"></a><code><span class="keyword">val</span> make_thumb : <span>n_keys:Base.int</span> <span>&#45;&gt;</span> <span>centre_idx:Base.float</span> <span>&#45;&gt;</span> <span>curve:<span><span class="type-var">'k</span> <a href="../../Generator/Curvature/index.html#type-t">Generator.Curvature.t</a></span></span> <span>&#45;&gt;</span> <span>caps:<span>(Base.int <span>&#45;&gt;</span> Scad_ml.Scad.t)</span></span> <span>&#45;&gt;</span> <span>rotate_clips:Base.bool</span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="../../Generator/KeyHole/index.html#type-t">Generator.KeyHole.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="../../Generator/Column/index.html#type-t">Generator.Column.t</a></span></code></dt><dd><p><code>make_thumb ~n_keys ~centre_idx ~curve ~rotate_clips ~caps keyhole</code></p><p>Factored out helper function for creation of the thumb cluster, using the distribution specification <code>curve</code> to place <code>n_keys</code> <code>keyhole</code>s, around the <code>centre_idx</code> key, with caps according to the lookup <code>caps</code>. <code>rotate_clips</code> flags whether to rotate the switch-clips / sockets / etc by 90 degrees. Non-rotated, the clips will be however they are on a usual column(e.g. oriented top to bottom). You may want to set this according to orientation you would like to have your caps in, since Mx stems are not necessarily radially symmetric.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>?&#8288;n_cols:Base.int</span> <span>&#45;&gt;</span> <span>?&#8288;centre_col:Base.int</span> <span>&#45;&gt;</span> <span>?&#8288;spacing:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;tent:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;n_thumb_keys:Base.int</span> <span>&#45;&gt;</span> <span>?&#8288;thumb_centre:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;thumb_curve:<span><span class="type-var">'k</span> <a href="../../Generator/Curvature/index.html#type-t">Generator.Curvature.t</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;rotate_thumb_clips:Base.bool</span> <span>&#45;&gt;</span> <span>?&#8288;thumb_offset:Scad_ml.Vec3.t</span> <span>&#45;&gt;</span> <span>?&#8288;thumb_angle:Scad_ml.Vec3.t</span> <span>&#45;&gt;</span> <span>?&#8288;lookups:<span><span class="type-var">'k</span> <a href="Lookups/index.html#type-t">Lookups.t</a></span></span> <span>&#45;&gt;</span> <span>?&#8288;caps:<span>(Base.int <span>&#45;&gt;</span> Scad_ml.Scad.t)</span></span> <span>&#45;&gt;</span> <span>?&#8288;thumb_caps:<span>(Base.int <span>&#45;&gt;</span> Scad_ml.Scad.t)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="../../Generator/KeyHole/index.html#type-t">Generator.KeyHole.t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>make ?n_rows ?centre_row ?n_cols ?centre_col ?spacing ?tent ?n_thumb_keys ?thumb_centre
      ?thumb_curve ?rotate_thumb_clips ?thumb_offset ?thumb_angle ?lookups ?caps ?thum_caps
      keyhole</code></p><p>Create a switch plate, with provided optional parameters and defaults. The default parameters are used by the <code>Splaytyl</code> and <code>Closed</code> configurations, and may or may not be suitable as a jumping off point for your own design. To that end, other examples with divergent parameters are provided in the modules within the <code>boards</code> sub-directory.</p><ul><li><code>n_cols</code> specifies number of columns on the main body of the switch plate</li><li><code>centre_col</code> specifies the column around which the others are positioned (typically 2, the middle finger) on the main body of the switch plate</li><li><code>spacing</code> gives the distance in mm between each column by default. Further adjustment can of course be done with <a href="Lookups/index.html#type-t.offset"><code>Lookups.t.offset</code></a>.</li><li><code>tent</code> angle in radians that the entire plate (including thumb) will be y-rotated</li><li><code>n_thumb_keys</code>, <code>thumb_centre</code>, <code>thumb_curve</code> and <code>rotate_thumb_clips</code>: see <a href="index.html#val-make_thumb"><code>make_thumb</code></a></li><li><code>thumb_offset</code> directs the translation used for thumb cluster placement (starting point if zero origin).</li><li><code>thumb_angle</code> sets the euler (x -&gt; y -&gt; z) rotation used to orient the thumb before translating to its destination (rotation is about 0., oriented along x to start).</li><li><code>lookups</code> provides various per-column key/column-placement and orientation functions. See <a href="Lookups/index.html"><code>Lookups</code></a>.</li><li><code>caps</code> is a lookup from row number to a <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> representing a keycap. This will be used to provide caps to <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>s before they are distributed in <a href="../Column/index.html#val-make"><code>Column.make</code></a>.</li><li><code>thumb_caps</code> same as <code>caps</code>, but for the thumb. If not provided, this default to <code>caps</code>.</li><li><code>keyhole</code> is the <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a> that will be distributed to make up the main plate and thumb cluster, carring all contained coordinate information and accesory <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span>s along with them to their new homes.</li></ul></dd></dl><dl><dt class="spec value" id="val-column_joins"><a href="#val-column_joins" class="anchor"></a><code><span class="keyword">val</span> column_joins : <span>?&#8288;in_d:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;out_d1:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;out_d2:Base.float</span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>column_joins ?d1 ?d2 t</code></p><p>Returns a <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> scad which joins together all columns of the main plate by hulling the <a href="../KeyHole/Face/index.html#type-t.scad"><code>KeyHole.Face.t.scad</code></a>s of the <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>s together, for a closed switch-plate look (and sturdiness). Typically, a function such as this or <a href="index.html#val-skeleton_bridges"><code>skeleton_bridges</code></a> below will be used as as the <code>plate_welder</code> parameter to <a href="../Case/index.html#val-make"><code>Case.make</code></a>. Optional params <code>in_d</code>, <code>out_d1</code> and <code>out_d2</code> are passed on to <span class="xref-unresolved" title="unresolved reference to &quot;Bridges.cols&quot;"><code>Bridges</code>.cols</span> to control how far the lower key's face is moved out, and the upper keys face is moved in before being hulled with its neighbours across the gap. This can be used to thicken the generated supports.</p></dd></dl><dl><dt class="spec value" id="val-skeleton_bridges"><a href="#val-skeleton_bridges" class="anchor"></a><code><span class="keyword">val</span> skeleton_bridges : <span>?&#8288;in_d:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;out_d1:Base.float</span> <span>&#45;&gt;</span> <span>?&#8288;out_d2:Base.float</span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>skeleton_bridges ?d1 ?d2 t</code></p><p>Returns a <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> scad with &quot;bridges&quot; between the bottom row keys from index to middle, and the top keys for the remaining columns. Similar to the BastardKB skeletyl. This function, as well as <a href="index.html#val-column_joins"><code>column_joins</code></a> make use of functions found in the <code>Bridges</code> module, if you are wanting to do something different, that would be a good place to get started. Optional params <code>in_d</code>, <code>out_d1</code> and <code>out_d2</code> are passed on to <span class="xref-unresolved" title="unresolved reference to &quot;Bridges.cols&quot;"><code>Bridges</code>.cols</span> to control how far the lower key's face is moved out, and the upper keys face is moved in before being hulled with its neighbours across the gap. This can be used to thicken the generated supports.</p></dd></dl><dl><dt class="spec value" id="val-to_scad"><a href="#val-to_scad" class="anchor"></a><code><span class="keyword">val</span> to_scad : <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>to_scad t</code></p><p>Extracts the <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> from <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-collect"><a href="#val-collect" class="anchor"></a><code><span class="keyword">val</span> collect : <span>f:<span>(<span>key:Base.int</span> <span>&#45;&gt;</span> <span>data:<span><span class="type-var">'k</span> <a href="../../Generator/KeyHole/index.html#type-t">Generator.KeyHole.t</a></span></span> <span>&#45;&gt;</span> <span>Scad_ml.Scad.t Base.list</span> <span>&#45;&gt;</span> <span>Scad_ml.Scad.t Base.list</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>collect ~f t</code></p><p>Fold over all <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>s contained within <code>t</code>, extracting <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span>s with <code>f</code>, and unioning them. Used for <a href="index.html#val-collect_caps"><code>collect_caps</code></a> and <a href="index.html#val-collect_cutouts"><code>collect_cutouts</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-collect_caps"><a href="#val-collect_caps" class="anchor"></a><code><span class="keyword">val</span> collect_caps : <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>collect_caps t</code></p><p>Return a <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> representing the union between all caps carried by the <a href="../KeyHole/index.html#type-t"><code>KeyHole.t</code></a>s that make up the plate <code>t</code>. Used to design around keycap closeness, and lookout for collisions etc.</p></dd></dl><dl><dt class="spec value" id="val-collect_cutouts"><a href="#val-collect_cutouts" class="anchor"></a><code><span class="keyword">val</span> collect_cutouts : <span><span class="type-var">'k</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> Scad_ml.Scad.t</code></dt><dd><p><code>collect_cutout t</code></p><p>Return a <span class="xref-unresolved" title="unresolved reference to &quot;Scad.t&quot;"><code>Scad</code>.t</span> representing the union between all <a href="../KeyHole/index.html#type-t.cutout"><code>KeyHole.t.cutout</code></a>s found in the plate <code>t</code>. This is used by <a href="../Case/index.html#val-make"><code>Case.make</code></a> to perform the clearance cut from the <a href="../Case/index.html#type-t.scad"><code>Case.t.scad</code></a> model to make room for whatever the <a href="../KeyHole/index.html#type-t.cutout"><code>KeyHole.t.cutout</code></a> is modelling (e.g. hotswap sockets). Like <a href="index.html#val-collect_caps"><code>collect_caps</code></a>, this could also be useful for visualization.</p></dd></dl></div></body></html>